"use strict";$(function(){var n=getCookie("nickname");if(n?($(".off").addClass("hide"),$(".on").removeClass("hide").text("欢迎您: ".concat(n,'<a class="exit">退出</a>'))):($(".off").removeClass("hide"),$(".on").addClass("hide")),!n)return window.location.href="../html/login.html";var c=JSON.parse(window.localStorage.getItem("cart"))||[];if(console.log(c),!c.length)return $(".on").addClass("hide"),void $(".off").removeClass("hide");function o(){var t=0,a=0;c.forEach(function(n){"1"===n.is_select&&(t+=+n.cart_number,a+=n.cart_number*n.price)}),console.log("件数",t),console.log("总价格",a);var o='\n        <div class="box">\n            <div class="white">\n                <ul class="goods">\n      ';c.forEach(function(n){o+='\n            <li>\n                <div class="select">\n                    <input data-id="'.concat(n.Id,'" type="checkbox" ').concat("0"===n.is_select?"":"checked",'>\n                </div>\n                <div class="goodsImg">\n                    <img src="').concat(n.img,'" alt="">\n                </div>\n                <div class="goodsDesc">\n                    <p>').concat(n.title,'</p>\n                </div>\n                <div class="price">\n                    ￥ <span class="text-danger">').concat(n.price,'</span>\n                </div>\n                <div class="count">\n                    <button class="subNum" data-id="').concat(n.Id,'">-</button>\n                    <input type="text" value="').concat(n.cart_number,'">\n                    <button class="addNum" data-id="').concat(n.Id,'">+</button>\n                </div>\n                <div class="xiaoji">\n                    ￥ <span class="text-danger">').concat((n.price*n.cart_number).toFixed(2),'</span>\n                </div>\n                <div class="operate">\n                    <button class="btn btn-danger del" data-id="').concat(n.Id,'">删除</button>\n                </div>\n            </li>\n        ')}),o+='\n                            </ul>\n                                                \n                        </div>\n                    </div>\n                    <div class="total">\n                        <div class="row buyInfo">\n                            <p class="col-sm-4 buyNum">\n                                购买总数量: <span class="text-danger cartNum">'.concat(t,'</span> 件商品\n                            </p>\n                            <p class="col-sm-4 buyMoney">\n                                购买总价格: <span class="text-danger total">').concat(a.toFixed(2),'</span> 元\n                            </p>\n                            <p class="col-sm-4 operate">\n                                <button class="btn btn-success" ').concat(0===a?"disabled":"",'>立即付款</button>\n                                <button class="btn btn-danger">清空购物车</button>\n                                <button class="btn btn-primary">继续购物</button>\n                            </p>\n                    </div>\n                </div>\n            \n        \n      '),$(".cartBox").html(o)}$(".off").addClass("hide"),$(".on").removeClass("hide"),o(),$(".on").on("click",".select > input",function(){var n=this.checked,t=$(this).data("id"),a=c.filter(function(n){return n.Id==t})[0];console.log(a),a.is_select=n?"1":"0",console.log(a.is_select),o(),window.localStorage.setItem("cart",JSON.stringify(c))}),$(".on").on("click",".addNum",function(){var t=$(this).data("id"),n=c.filter(function(n){return n.Id==t})[0];n.cart_number=+n.cart_number+1,o(),window.localStorage.setItem("cart",JSON.stringify(c))}),$(".on").on("click",".subNum",function(){var t=$(this).data("id"),n=c.filter(function(n){return n.Id==t})[0];1!==n.cart_number&&(n.cart_number=+n.cart_number-1,o(),window.localStorage.setItem("cart",JSON.stringify(c)))}),$(".on").on("click",".del",function(){for(var n=$(this).data("id"),t=0;t<c.length;t++)if(c[t].Id==n){c.splice(t,1);break}if(o(),window.localStorage.setItem("cart",JSON.stringify(c)),!c.length)return window.location.reload()}).on("mouseout",".itemNum",function(){console.log($(this).val());var t=$(this).data("id"),n=c.filter(function(n){return n.Id==t})[0];0<$(this).val()&&(n.cart_number=$(this).val()),o(),window.localStorage.setItem("cart",JSON.stringify(c))}),$(".exit").on("click",function(){var n=getCookie("nickname");console.log(n),delCookie(n),window.location.href="./index.html"})});